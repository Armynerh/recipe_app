<h1><%= @recipe.name %></h1>
<% if current_user == @recipe.user || @recipe.public %>
  <p>
    <strong>Preparation Time:</strong> <%= @recipe.preparation_time %> minutes<br>
    <strong>Cooking Time:</strong> <%= @recipe.cooking_time %> minutes<br>
    <strong>Public:</strong> <%= @recipe.public ? 'Yes' : 'No' %><br>
  </p>
  <%= button_to toggle_public_recipe_path(@recipe), method: :post, class: @recipe.public ? 'public' : 'private' do %>
    <%= @recipe.public ? 'Make Private' : 'Make Public' %>
  <% end %>

  <% if current_user == @recipe.user %>
  <div class="flex">
      <%= link_to 'Get Shopping List',  general_shopping_lists_path(@recipe), method: :get, class: 'btn-link' %>
    <%= link_to 'Add Ingredients', new_recipe_recipe_food_path(@recipe), class: 'btn-link' %>
  </div>
    <table>
      <thead>
        <tr>
          <th>Food</th>
          <th>Quantity</th>
          <th>Value</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @recipe.recipe_foods.each do |recipe_food| %>
          <tr>
            <td><%= recipe_food.food.name %></td>
            <td><%= recipe_food.quantity %></td>
            <td><%= number_to_currency(recipe_food.quantity * recipe_food.food.price) %></td>
            <% if recipe_food.recipe.user_id == current_user.id%>
              <td class='inline' style='display: flex;'>
  <%= link_to "Modify", edit_food_path(recipe_food.food_id), class:'edit-btn'  %>
  <%= button_to "Remove", [@recipe, recipe_food], method: :delete %>
</td>

            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
<% else %>
  <p>This recipe is private.</p>
<% end %>
<%= link_to 'Back', recipes_path %>
